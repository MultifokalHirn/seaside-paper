% Koma-Script Basisklasse
\documentclass[a4paper,12pt,pagesize,headsepline,oribibl,titlepage]{scrartcl}

\usepackage[utf8]{inputenc}		% direkte Eingabe von Umlauten & Co. (Vorsicht: Encoding im Editor muss auch UTF-8 sein!)

\usepackage[T1]{fontenc}			% T1-Schriften


\usepackage{mathptmx}			% Times/Mathe \rmdefault
\usepackage[scaled=.90]{helvet}	% Skalierte Helvetica \sfdefault
\usepackage{courier}			% Courier \ttdefault
\usepackage[cache=false,outputdir=.texpadtmp]{minted}
% Zusatzpakete für mehr mathematische Symbole, Einfügen von Grafiken 
% und bessere Bildunterschriften
\usepackage{amsmath,amsthm,amsfonts,graphicx,caption}

% Wenn man direkt mit dem pdflatex eine PDF-Datei erzeugt, sollten diese beiden Pakete eingebunden werden
\usepackage{hyperref} % Hyperlinks anklickbar
\usepackage{ae,aecompl} % bessere Bildschirmschriftarten usw.

\pagestyle{headings}

% Abstand der Kopfzeile vom Text:
\headsep4mm

\typearea[current]{current}     % Satzspiegel neu berechnen

% customize dictum format:
\setkomafont{dictumtext}{\itshape\small}
\setkomafont{dictumauthor}{\normalfont}
\renewcommand*\dictumwidth{\linewidth}
\renewcommand*\dictumauthorformat[1]{--- #1}
\renewcommand*\dictumrule{}
\newcommand{\todo}[1]{\textcolor{red}{TODO: #1}\PackageWarning{TODO:}{#1!}}
%\renewcommand{\captionlabelfont}{\bf}

\title{
	\includegraphics*[width=0.4\textwidth]{hpi_logo.png}\\
	\vspace{24pt}
	 Seaside - An Object-Oriented Web Application Development Framework
}
\subtitle{
	Seminar\\
	Weiterführende Themen zu Internet- und WWW-Technologien\\
	Sommersemester 2016
}
\author{
	Lennard Wolf\\[12pt]
	Betreuer:\\
	Matthias Bauer, Haojin Yang\\
	Prof. Dr. Christoph Meinel
}
\date{\today}

\begin{document}
\maketitle
\tableofcontents
\newpage

\section{Introduction}
Seaside is an open source object-oriented web application development framework for the Smalltalk programming language. The strict object-oriented approach as well as it's concept of user sessions offers a unique perspective on programmers' workflow and logic behind web apps. It thus differs immensely from today's more common webframeworks in the field such as \emph{AngularJS}, \emph{Django}, or \emph{Ruby on Rails}. This text aims at a basic understanding of its history and the context in which it was conceived, its concepts, how they differ from other frameworks of its kind, what working with it looks like, and what can be learned from it. 
\medskip

This work is structured as follows. Section \ref{sec:history} introduces the history of Seaside including its context, the motivations behind it, as well as its current state. In Section \ref{sec:workflow} we introduce the Smalltalk programming language, the core concepts of Seaside, and the workflow that results from them. Then, in Section \ref{sec:evaluation}, we take a critical look at Seaside, evaluate it in the context of current technologies, and summarize what Seaside can teach web developers of today. Section \ref{sec:conclusion} concludes this work.


\section{History of Seaside}
\label{sec:history}
To understand Seaside's origins, knowledge of the technologies currently popular at the beginnings of its development is required first. This Section will thus start out with such an overview, then present the original and current motivations behind Seaside, followed by a list of the people involved, a development timeline, and finally the current state of both the feature list and the development in general will be examined.

\subsection{Historical Context}
\label{sec:context} 

The viewable internet started out as a network of static pages usually written in HTML. With the progress of time came the want to not only make these sites more visually pleasing, but for the user to be able to interact with them. For this, web application development frameworks have been created for many different programming languages and with differing opinions of what the web of the future should look like. At the beginning of the new millenium, technologies such as \emph{AJAX} (\textbf{A}synchronous \textbf{J}avaScript \textbf{A}nd \textbf{X}ML) did not exist, mostly because there had not been a broadly accepted answer to the question, whether web applications should run on the \emph{server} or on the \emph{client} side. Today, in 2016, most web apps run in the users' browsers. In the early 2000s however, many people were sceptical towards the idea of just letting any foreign script run freely on their machine, leading them to block JavaScript applications by default. This state of affairs led many developers to build their interactive web applications for server side execution. 

During this time, questions like this one, or for example whether URLs have to be human readable, were still up for debate. This is why technologies like Seaside present their own take on them which might appear confusing and non-sensical to some web developers of today. 


\subsection{Motivation}
\label{sec:motivation} 
\medskip

\dictum[Avi Bryant, \textit{Web Heresies: The Seaside Framework} \cite{Bryant06}]{%
Over the last few years, some best practices have come to be widely accepted in the web development world. Share as little state as possible. Use clean, carefully chosen, and meaningful URLs. Use templates to separate your model from your presentation.
\newline

Seaside is a web application framework for Smalltalk that breaks all of these rules and then some. Think of it as an experiment in tradeoffs: if you reject the conventional wisdoms of web development, what benefits can you get in return? Quite a lot, it turns out, and this "experiment" has gained a large open source following, seen years of production use, and been heralded by some as the future of web applications.}
\bigskip

Avi Bryant and Julian Fitzell started working on a web application framework for Smalltalk in 2001 within the context of their consulting endeavours, as well as their current project of building a theatre boxoffice sales system, which was supposed to be using it. Bryant had built such a framework before in Ruby, called \emph{Iowa}, which was heavily influenced by Apple's \emph{WebObjects}\footnote{The still active community of volunteer developers can be found at \url{https://wiki.wocommunity.org/display/WEB/Home}, accessed: 2016-09-13} for Java. The philosophies shared by these two frameworks were \emph{object-orientation}, \emph{database connectivity}, and \emph{fast prototyping}\footnote{This feature is best shown by example, as Ramon Leon created a fully functional skeleton for a blog within 15 minutes with Seaside, back in 2006: \url{http://onsmalltalk.com/screencast-how-to-build-a-blog-in-15-minutes-with-seaside}, accessed: 2016-09-13}. These then, as well as the concept of \emph{continuations} through \emph{user sessions}, built the foundations for the new project, which aimed to bring a unique framework to Smalltalk environments.


\subsection{Development}
\label{sec:dev} 

The first version, Seaside 0.9, was announced in February 2002 by Bryant and Fitzell to the \emph{squeak-dev} mailing list\footnote{The community is still active today and can be found at \url{http://lists.squeakfoundation.org/mailman/listinfo/squeak-dev}, accessed: 2016-09-12}. It supported action callbacks, a session state system, and a component system, of which the latter two are the core of the Seaside programming principles.

From the beginning it was open source under the MIT License and because of the big amount of feedback from the Smalltalk community, the development could happen quite fast. Thus, version 2.0 came out in October 2003 and was a complete rewrite of the system. It included many new features such as HTML generation, in-browser development tools, and a \emph{Views} layer to name a few. \cite{Fitzl}


\subsection{Current State and Key Features}
\label{sec:current} 

Since Seaside is still in use in some places, it still has contributors\footnote{A full list can be found at \url{http://www.seaside.st/community/contributors}, accessed: 2016-09-12} that fix bugs, work on the support of other technologies and their updates, improve memory efficiency as well as rendering speed, and maintain the overall code quality. 
The latest stable version, Seaside 3.2\footnote{Releases can be found on the GitHub releases page: \url{https://github.com/SeasideSt/Seaside/releases}, accessed: 2016-09-13}, was released on May 5, 2016 and mainly focuses on performance and scalability. Improvements in these areas over time are presented on the \url{http://www.seaside.st} website by comparison of unit test results with older version, as shown in Figure \ref{fig:performance}.

\begin{figure}[hbp]
\begin{center}
\includegraphics*[width=0.7\textwidth]{images/performance.png}\\
\caption{The substantial performance improvements in version 2.8}
\label{fig:performance}
\end{center}
\end{figure}

As mentioned above, the key ideas underlying the design of Seaside are \emph{object-orientation}, \emph{continuations}, as well as \emph{fast prototyping and development}.
The object-orientated approach brought about the so called \emph{components}, which are the stateful and reusable building  blocks of a website. Their state is saved in \emph{user session objects}, or \emph{continuations}, on the server and each of which is linked to a certain user via \todo{XXXX}, so that when one returns to the website, its state is the same as when one has left it earlier.

The stateful components based site creation makes Seaside's workflow comparable to that of working with the \emph{React} JavaScript library\footnote{For documentation etc. visit \url{https://facebook.github.io/react}, accessed: 2016-09-13}. As it has become common, Seaside too works over the \emph{Model View Controller} architecture pattern, which had actually originally been conceived by Trygve Reenskaug whilst working on Smalltalk at Xerox PARC \cite{reenskaug1979original}. But furthermore, the framework provides productivity tools such as \emph{live debugging} in the Smalltalk environment with the powerful Smalltalk debugger that not only lets developers browse the call stack easily, but edit the code within the debugger and make the changes effective immediately, providing a smooth bug fixing experience. If enabled, Seaside allows inspection and editing of components within the page shown in the browser, and in error cases, the call stack can be viewed and the faulty code fixed from within the browser too.

When creating a website with Seaside, no actual HTML code has to be written, since the Smalltalk code which describes the components is used by the renderer to generate HTML code automatically. Further, such a website can also be rendered with \emph{morphs}, the building blocks of most GUI based Smalltalk environments, enabling the development without the need of a browser. 

Over the time, Seaside has come to support many common web technologies. Since \emph{CSS} (\textbf{C}ascading \textbf{S}tyle \textbf{S}heets) is commonly used to make webpages visually  appealing, it is supported by Seaside, as well as AJAX, Comet, and basic JavaScript.


\section{Working with Seaside}
\label{sec:workflow}

In this Section we will shortly introduce the object-oriented programming language Smalltalk in which Seaside is written and used. Then we will explain the installation process and the basic workflow with Seaside, which entails the following two aspects. The first is configuration through visual menus for the initial setup or core structural changes. The second is actual writing of code in the Smalltalk environments' GUI \emph{Browser}-windows\cite{perscheid2008introduction}.


\subsection{Smalltalk}

Smalltalk was created in the 70's at Xerox PARC by Alan Kay \emph{et al.} for research and educational purposes. It is dynamically typed and purely object-oriented, meaning that \emph{everything in a Smalltalk environment is an object} and can thus be easily interacted with. Smalltalk environments such as the free and open source Squeak or the proprietary Gemstone\footnote{Squeak: \url{http://squeak.org} Gemstone: \url{https://gemtalksystems.com}, both accessed: 2016-09-11} are normally shipped with the Smalltalk core classes (e.g. the fundamental \mintinline{smalltalk}{Object} class, which all other classes inherit from), as well as additional ones, depending on the environment's use cases. One of their most important features is \emph{reflection}, with which the programmer is able to inspect and modify every part of the system at runtime. This is especially useful in cases where a system may never shut down, because the changed code does not need to be recompiled but comes into effect immediately. 

The syntax can be described as minimalistic. Smalltalk code consists of sequences of messages sent to objects (\mintinline{smalltalk}{anObject message})\footnote{A good overview on the Smalltalk syntax was created by Chris Rathman and can be found at \url{http://www.angelfire.com/tx4/cus/notes/smalltalk.html}}. Listing \ref{lst:smalltalksyntax} presents syntax basics that are helpful when approaching Seaside.  


\begin{listing}[]%ht]
\begin{minted}{smalltalk}

"Send the message 'not' to 'true' and assign the returned value to a."
a := true not.

"Messages can be chained."
b := a not not not.

"Blocks are sequences of executable code that return the value of the 
last line. They can take any number of arguments (here x and y)."
aBlock := [ :x :y | z := x * y. z - (2 * x) ].

"aBlock is executed with varying parameters depending on b's state."
answer := b ifTrue: [aBlock value: 7 value: 8] 
            iFalse: [aBlock value: 0 value: 0].

\end{minted}
\caption{The core syntax of Smalltalk}
\label{lst:smalltalksyntax}
\end{listing}

\subsection{Installing Seaside}

As with most Smalltalk packages, Seaside can be installed with a common package manager. In the cases of Squeak and Pharo, Metacello can automate the installation with the script shown in Listing \ref{lst:install}. However for other environments, like Gemstone, the installation process is a bit more complex, but can be found on Seaside's GitHub page\footnote{\url{https://github.com/SeasideSt/Seaside}, accessed: 2016-09-13}.

\begin{listing}[]%ht]
\begin{minted}{smalltalk}

Metacello new
 configuration: 'Seaside3';
 repository: 'http://www.smalltalkhub.com/mc/Seaside/MetacelloConfigurations/main';
 version: #stable;
 load: 'OneClick'.

\end{minted}
\caption{Seaside installation script for Squeak and Pharo}
\label{lst:install}
\end{listing}

\subsection{Setting up a Website}

When starting out with creating a website, \ref{lst:seasidefirststeps}

\begin{listing}[]%ht]
\begin{minted}{smalltalk}

MyRootComponent class>>canBeRoot
    ^true
    
MyRootComponent class>>initialize
    "self initialize"
    | app |
    app := self registerAsApplication: #myWebsite.
    app libraries add: SULibrary.
    app preferenceAt: #sessionClass put: CustomSession
    
\end{minted}
\caption{Making the MyRootComponent the website's root, adding the Scriptaculous library, and creating a custom session class}
\label{lst:seasidefirststeps}
\end{listing}

\subsection{Using Components}

\subsection{Debugging}

\subsection{Managing Sessions}

\begin{figure}[hbp]
\begin{center}
\includegraphics*[width=0.75\textwidth]{images/toolbar.png}\\
\caption{something something}
\label{abb:test}
\end{center}
\end{figure}

\section{Evaluation}
\label{sec:evaluation}
\todo{http://amber-lang.net/index.html}
\todo{\emph{object-orientation}, \emph{continuations}, and \emph{fast prototyping/development}}.

\begin{itemize}
\item comparison of features:
\item everything is an object
\item synchronous vs async
\end{itemize}

\begin{itemize}
\item Each session object can be multiple megabytes big If server crashes, all sessions are lost
\item Gemstone distributed but expensive
\item Javascript not really debuggable
\item Very hard to implement human readable URLs
\item Not on par with today’s demands of a fast dynamic webpage since its server side
\end{itemize}

\section{Conclusion}
\label{sec:conclusion}

\todo{URLS IN BIBLIOGRAPHY!!!}

\newpage
\nocite{*}
\bibliographystyle{plain}
\bibliography{seaside-paper}

\end{document}